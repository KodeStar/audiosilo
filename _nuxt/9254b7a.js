(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(t,e,r){"use strict";r.r(e);var n={name:"FloatingLabelInput",props:["value","title"],data:function(){return{}}},o=r(7),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"relative border border-gray-100 dark:border-gray-860 rounded-2xl appearance-none label-floating lg:block max-w-xl flex-grow"},[r("input",{staticClass:"w-full py-3 px-5 bg-gray-300 dark:bg-gray-840 shadow-inner leading-normal rounded-2xl max-w-xl",attrs:{type:"text",placeholder:t.title},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t._v(" "),r("label",{staticClass:"pointer-events-none select-none absolute block top-0 left-0 w-full px-5 py-3 leading-normal"},[t._v("\n    "+t._s(t.title)+"\n  ")])])}),[],!1,null,null,null);e.default=component.exports},136:function(t,e,r){"use strict";r.r(e),r.d(e,"totalTime",(function(){return n})),r.d(e,"getStart",(function(){return o}));r(20);function n(t){var e=0;return t.files.forEach((function(t){e+=t.meta.duration})),e}function o(t){return function(t){return t.reduce((function(a,b){return+a+ +b.meta.duration}),0)}}},137:function(t,e,r){"use strict";r.r(e),r.d(e,"resetPlayer",(function(){return o})),r.d(e,"player",(function(){return c})),r.d(e,"files",(function(){return l})),r.d(e,"currentFile",(function(){return f})),r.d(e,"playing",(function(){return d})),r.d(e,"loading",(function(){return h})),r.d(e,"current",(function(){return m}));var n=r(80);function o(t){Object.assign(t,n.default)}function c(t,data){t.player.src=data.src,t.player.currentTime=data.currentTime}function l(t,data){t.files=data}function f(t,data){t.currentFile=data}function d(t,data){t.playing=data}function h(t,data){t.loading=data}function m(t,data){t.current=data}},138:function(t,e,r){"use strict";r.r(e),r.d(e,"resetPlayer",(function(){return f})),r.d(e,"load",(function(){return d})),r.d(e,"loadCurrent",(function(){return m})),r.d(e,"getCurrentFile",(function(){return v})),r.d(e,"globalSeekToLocalSeek",(function(){return y})),r.d(e,"setGlobalSeek",(function(){return x}));r(32),r(18),r(31),r(43),r(20),r(44);var n=r(16),o=r(0);r(24),r(109);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function f(t){(0,t.commit)("resetPlayer")}function d(t,e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(regeneratorRuntime.mark((function t(e,data){var r,path,n,o,audio;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.commit("app/player",!0,{root:!0}),e.commit("playing",!1),r=l({},e.rootState.app.folder),data||(data=m(e)),path=e.rootGetters["app/getFileUrl"](data.file),n={hash:e.rootState.app.book.hash,file:path},t.next=8,e.dispatch("app/fileIsCached",n,{root:!0});case 8:if(!t.sent){t.next=14;break}return t.next=12,e.dispatch("app/getCachedFile",n,{root:!0});case 12:o=t.sent,path=o.src;case 14:audio={src:path,currentTime:data.seek.toFixed(2)},e.commit("player",audio),e.commit("files",r.files),e.commit("current",data.seek);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){var e=t.rootState.app.folder,r=t.rootState.app.book,data={};v(t,{files:e.files,seek:r.seek});var n=t.state.currentFile;return console.log(n),data.file=n.path,data.seek=y(t,{global:r.seek,local:n.start}),data}function v(t,data){console.log("getCurrentFile"),console.log(data);for(var e=0,i=0,r=data.files.length;i<r;i++){if(console.log(e+data.files[i].meta.duration),console.log("seek: "+data.seek),e+data.files[i].meta.duration>data.seek)return t.commit("currentFile",{index:i,start:e,duration:data.files[i].meta.duration,path:data.files[i].path});e+=data.files[i].meta.duration}}function y(t,data){return data.global-data.local}function x(t){}},139:function(t,e,r){"use strict";r.r(e),e.default=function(){return{collections:[],currentCollection:0,cacheKey:"audioserve-",loginStatus:!1,loginsecret:null,server:null,folder:{cover:null,description:null,files:[],subfolders:[]},group:null,search:!1,searchterm:"",menu:!1,activepage:"library",groupDetails:{playback_speed:1,seekForwards:45,seekBackwards:30,active_books:[],finished_books:[],cached_books:[],transcode:"0",darkMode:!1},book:{hash:null,name:null,author:null,description:null,cover:null,seek:0,path:null,history:[]},folderDescription:"",secret:null,player:!1,transcode:"0",rightbar:!1}}},140:function(t,e,r){"use strict";r.r(e),r.d(e,"getServerUrl",(function(){return o})),r.d(e,"getFileUrl",(function(){return c})),r.d(e,"hash",(function(){return l}));var n=r(103);function o(t){var e=t.server;return t.currentCollection>0&&(e=t.server+t.currentCollection+"/"),e}function c(t){return function(e){return o(t)+"audio/"+e+"?trans="+t.groupDetails.transcode}}function l(t){return function(t){return Object(n.sha256)(t)}}},141:function(t,e,r){"use strict";r.r(e),r.d(e,"loginsecret",(function(){return c})),r.d(e,"rightbar",(function(){return l})),r.d(e,"player",(function(){return f})),r.d(e,"groupDetails",(function(){return d})),r.d(e,"playbackSpeed",(function(){return h})),r.d(e,"book",(function(){return m})),r.d(e,"folder",(function(){return v})),r.d(e,"description",(function(){return y})),r.d(e,"cover",(function(){return x})),r.d(e,"folderDescription",(function(){return w})),r.d(e,"loginStatus",(function(){return k})),r.d(e,"server",(function(){return C})),r.d(e,"secret",(function(){return _})),r.d(e,"group",(function(){return j})),r.d(e,"collections",(function(){return O})),r.d(e,"currentCollection",(function(){return $})),r.d(e,"search",(function(){return S})),r.d(e,"searchterm",(function(){return F})),r.d(e,"menu",(function(){return menu})),r.d(e,"activepage",(function(){return R})),r.d(e,"clearCachedBooks",(function(){return P})),r.d(e,"addCachedBook",(function(){return D}));r(32),r(31),r(43),r(20),r(44);var n=r(16);r(18),r(37),r(33),r(99);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function c(t,data){t.loginsecret=data}function l(t,data){t.rightbar=data}function f(t,data){t.player=data}function d(t,data){t.groupDetails=data}function h(t,data){t.groupDetails.playback_speed=data}function m(t,data){t.book=data}function v(t,data){t.folder=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},data)}function y(t,data){t.book.description=data}function x(t,data){t.book.cover=data}function w(t,data){t.folderDescription=data}function k(t,data){t.loginStatus=data}function C(t,data){t.server=data}function _(t,data){t.secret=data}function j(t,data){t.group=data}function O(t,data){t.collections=data}function $(t,data){t.currentCollection=data}function S(t,data){t.search=data}function F(t,data){t.searchterm=data}function menu(t,data){t.menu=data}function R(t,data){t.activepage=data}function P(t){t.groupDetails.cached_books=[]}function D(t,e){t.groupDetails.cached_books.push(e)}},142:function(t,e,r){"use strict";r.r(e),r.d(e,"setDetails",(function(){return j})),r.d(e,"getGroupDetails",(function(){return O})),r.d(e,"setGroupDetails",(function(){return S})),r.d(e,"login",(function(){return F})),r.d(e,"selectFolder",(function(){return R})),r.d(e,"fetchFolder",(function(){return P})),r.d(e,"fileList",(function(){return T})),r.d(e,"fetchCollections",(function(){return I})),r.d(e,"getFolderDescription",(function(){return E})),r.d(e,"getBookDetails",(function(){return M})),r.d(e,"resetBook",(function(){return U})),r.d(e,"updateBookDetails",(function(){return H})),r.d(e,"setBookDetails",(function(){return K})),r.d(e,"getDescription",(function(){return V})),r.d(e,"fileIsCached",(function(){return Q})),r.d(e,"cachedBooks",(function(){return Y})),r.d(e,"contentToExtension",(function(){return tt})),r.d(e,"getCachedFile",(function(){return et})),r.d(e,"cacheFile",(function(){return nt})),r.d(e,"tempCache",(function(){return it})),r.d(e,"initialiseApp",(function(){return ct})),r.d(e,"savePlayEvent",(function(){return ut})),r.d(e,"savePauseEvent",(function(){return pt})),r.d(e,"autoRewind",(function(){return ft}));r(32),r(31),r(43),r(44),r(42),r(39),r(50),r(51);var n=r(16),o=r(0),c=(r(24),r(258),r(15),r(260),r(266),r(268),r(269),r(270),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(294),r(295),r(296),r(297),r(20),r(18),r(37),r(33),r(79),r(176),r(28),r(65),r(23),r(101),r(194)),l=r.n(c),f=r(103),d=r(146),h=r.n(d),m=r(41),v=r.n(m),y=r(17),x=r.n(y);function w(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function j(t,data){console.log("set details"),x.a.setItem("server",data.server),x.a.setItem("group",data.group),x.a.setItem("loginStatus",data.loginStatus),x.a.setItem("collections",data.collections),x.a.setItem("currentCollection",data.currentCollection)}function O(t){return $.apply(this,arguments)}function $(){return($=Object(o.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.getItem("group-"+e.state.group);case 2:(r=t.sent)&&e.commit("groupDetails",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){x.a.setItem("group-"+t.state.group,t.state.groupDetails)}function F(t,data){var e=!1,r=null;if(data.secret){var n=new TextEncoder("utf-8").encode(data.secret),c=new Uint8Array(32);window.crypto.getRandomValues(c);var l=new Uint8Array(n.length+c.length);l.set(n),l.set(c,n.length),(window.crypto.subtle?window.crypto.subtle.digest("SHA-256",l):Promise.resolve(f.sha256.arrayBuffer(l))).then((function(s){var n=h.a.fromByteArray(c)+"|"+h.a.fromByteArray(new Uint8Array(s)),l="secret="+encodeURIComponent(n);fetch(data.server+"authenticate",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}).then(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(o){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.text();case 2:return r=n.sent,v.a.set("audioserve_token",r),e=!0,t.commit("loginStatus",e),n.next=8,I(t);case 8:c=n.sent,j(0,_(_({},data),{},{loginStatus:e,collections:c.names,currentCollection:0}));case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){console.log(t)}))}))}else e=!0,r="noauth";t.commit("loginsecret",r),t.commit("loginStatus",e),j(0,_(_({},data),{},{loginStatus:e}))}function R(t,e){t.commit("folderDescription",""),t.commit("player",!1);var r={path:"/",query:{folder:e.path}};this.currentCollection>0&&(r.query.collection=this.currentCollection),this.app.router.push(r)}function P(t){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,n,o,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"",t.next=3,fetch(e.getters.getServerUrl+"folder/"+r,{headers:{Authorization:"Bearer "+v.a.get("audioserve_token")}});case 3:if(401!==(n=t.sent).status){t.next=7;break}return e.commit("loginStatus",!1),t.abrupt("return",!1);case 7:return t.next=9,n.json();case 9:if(!(o=t.sent)){t.next=18;break}if(!(o.files.length>0)){t.next=17;break}return console.log("check if files are cached"),t.next=15,T(e,o.files);case 15:o.files=t.sent,console.log(o);case 17:e.commit("folder",o);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e){return z.apply(this,arguments)}function z(){return(z=Object(o.a)(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.forEach(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){var path,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return path=e.rootGetters["app/getFileUrl"](r.path),n={hash:e.book.hash,file:path},t.next=4,Q(e,n);case 4:r.isCached=t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=3,r;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.state.server+"collections",{headers:{Authorization:"Bearer "+v.a.get("audioserve_token")}});case 2:return r=t.sent,t.abrupt("return",r.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e){return L.apply(this,arguments)}function L(){return(L=Object(o.a)(regeneratorRuntime.mark((function t(e,path){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e,path);case 2:r=t.sent,e.commit("folderDescription",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(t,e){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(regeneratorRuntime.mark((function t(e,r){var n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="book-"+e.state.group+"-"+r,t.next=3,x.a.getItem(n);case 3:if(o=t.sent){t.next=15;break}if(c=null,!e.state.folder.description||!e.state.folder.description.path){t.next=10;break}return t.next=9,V(e,e.state.folder.description.path);case 9:c=t.sent;case 10:return l=null,e.state.folder.cover&&(l=e.state.server+"cover/"+e.state.folder.cover.path),o={hash:r,name:"Unknown",author:"Unknown",description:c,cover:l,seek:0,path:this.app.router.app.$route.query.folder,history:[]},t.next=15,x.a.setItem(n,o);case 15:e.commit("book",o);case 16:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function U(t){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch("updateBookDetails",{seek:0});case 2:e.commit("player/currentFile",{index:0,start:0,duration:e.rootState.player.files[0].meta.duration,path:e.rootState.player.files[0].path},{root:!0}),e.commit("player/current",null,{root:!0});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t,e){return G.apply(this,arguments)}function G(){return(G=Object(o.a)(regeneratorRuntime.mark((function t(e,r){var n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="book-"+e.state.group+"-"+e.state.book.hash,o=e.state.book,c=_(_({},o),r),t.next=5,x.a.setItem(n,c);case 5:e.commit("book",c);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t,e){return J.apply(this,arguments)}function J(){return(J=Object(o.a)(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="book-"+e.state.group+"-"+r.hash,t.next=3,x.a.setItem(n,r);case 3:e.commit("book",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t,e){return X.apply(this,arguments)}function X(){return(X=Object(o.a)(regeneratorRuntime.mark((function t(e,path){var r,n,o,data,output,c,f,d,h,line;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.server+"desc/"+path,t.next=3,fetch(r,{headers:{Authorization:"Bearer "+v.a.get("audioserve_token")}});case 3:return n=t.sent,o=n.headers.get("Content-Type"),t.next=7,n.text();case 7:if(data=t.sent,output="",c="","text/html"===o)output=data;else if("text/x-markdown"===o||"text/markdown"===o)output=l()(data);else if("text/plain"===o){f=data.split(/\r?\n/),d=w(f);try{for(d.s();!(h=d.n()).done;)line=h.value,c+="<p>"+line+"</p>"}catch(t){d.e(t)}finally{d.f()}output=c}else output=n.data;return t.abrupt("return",output);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(t,e){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(regeneratorRuntime.mark((function t(e,details){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("caches"in window){t.next=2;break}return t.abrupt("return",!1);case 2:return r=e.state.cacheKey+details.hash,t.next=5,caches.has(r);case 5:if(!t.sent){t.next=14;break}return t.next=9,caches.open(r);case 9:return n=t.sent,t.next=12,n.match(details.file);case 12:return o=t.sent,t.abrupt("return",void 0!==o);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){return Z.apply(this,arguments)}function Z(){return(Z=Object(o.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("caches"in window){t.next=2;break}return t.abrupt("return",[]);case 2:return e.commit("clearCachedBooks"),t.next=5,caches.keys();case 5:return(r=t.sent)&&r.forEach(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.replace(e.state.cacheKey,""),t.next=3,x.a.getItem(n);case 3:(o=t.sent)&&e.commit("addCachedBook",o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),console.log(r),t.abrupt("return",[]);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t){var e="mp3";switch(t){case"audio/aac":e="aac";break;case"audio/mpeg":e="mp3";break;case"video/mp4":e="mp4";break;case"audio/ogg":e="oga";break;case"audio/opus":e="opus";break;case"audio/wav":e="wav";break;case"audio/webm":e="weba";break;case"audio/3gpp":e="3gp";break;case"audio/3gpp2":e="3g2"}return e}function et(t,e){return at.apply(this,arguments)}function at(){return(at=Object(o.a)(regeneratorRuntime.mark((function t(e,details){var r,n,o,c,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.cacheKey+details.hash,t.next=3,caches.open(r);case 3:return n=t.sent,t.next=6,n.match(details.file);case 6:if(o=t.sent,c=null,void 0===o){t.next=13;break}return t.next=11,o.blob();case 11:l=t.sent,c=URL.createObjectURL(l);case 13:return f=tt(o.headers.get("content-type")),t.abrupt("return",{src:c,format:f});case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nt(t,e){return ot.apply(this,arguments)}function ot(){return(ot=Object(o.a)(regeneratorRuntime.mark((function t(e,details){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.cacheKey+details.hash,t.next=3,caches.open(r);case 3:return n=t.sent,t.next=6,fetch(details.file,{headers:{Authorization:"Bearer "+v.a.get("audioserve_token")}});case 6:return o=t.sent,console.log(o),c=o.clone(),n.put(details.file,o),t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function it(t,e){return st.apply(this,arguments)}function st(){return(st=Object(o.a)(regeneratorRuntime.mark((function t(e,details){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e,details);case 2:if(!t.sent){t.next=5;break}return t.abrupt("return",et(e,details));case 5:return t.next=7,nt(e,details);case 7:if(r=t.sent,n=null,void 0===r){t.next=14;break}return t.next=12,r.blob();case 12:o=t.sent,n=URL.createObjectURL(o);case 14:return c=tt(r.headers.get("content-type")),t.abrupt("return",{src:n,format:c});case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(t){return lt.apply(this,arguments)}function lt(){return(lt=Object(o.a)(regeneratorRuntime.mark((function t(e){var r,n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.getItem("server");case 2:return r=t.sent,t.next=5,x.a.getItem("group");case 5:return n=t.sent,t.next=8,x.a.getItem("loginStatus");case 8:return o=t.sent,t.next=11,x.a.getItem("collections");case 11:return c=t.sent,t.next=14,x.a.getItem("currentCollection");case 14:l=t.sent,r&&e.commit("server",r),n&&e.commit("group",n),o&&e.commit("loginStatus",o),c&&e.commit("collections",c),l&&e.commit("currentCollection",l);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(t,e){var r=JSON.parse(JSON.stringify(t.state.book.history));r.push({start:Date.now(),startSeek:e,finish:null,endSeek:null}),H(t,{history:r})}function pt(t,e){var r=JSON.parse(JSON.stringify(t.state.book.history));r.at(-1).finish=Date.now(),r.at(-1).endSeek=e,H(t,{seek:e,history:r})}function ft(t){var e=t.state.book.history.at(-1),r=(Date.now()-e.finish)/1e3;return r=Math.floor(Math.log(r*(r/2)*(r/3))),console.log(r),r<2&&(r=2),r>t.rootState.player.current&&(r=t.rootState.player.current),r}},148:function(t,e,r){"use strict";r(15),r(100),r(300);e.a=function(t,e){t.app;function r(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Math.floor(t/3600).toString(),n=Math.floor(t%3600/60).toString(),s=Math.floor(t%60).toString();return e&&(r=r.padStart(2,"0"),n=n.padStart(2,"0"),s=s.padStart(2,"0")),{h:r,m:n,s:s}}e("formatToTime",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],time=r(t,n),output="";return time.h>0&&(output+=time.h+"h"),output+=time.m+"m",3===e&&(output+=time.s+"s"),output})),e("formatToPlayback",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],time=r(t,e),output="";return time.h>0&&(output+=time.h+":"),output+String(time.m).padStart(2,"0")+":"+String(time.s).padStart(2,"0")}))}},149:function(t,e,r){"use strict";r.r(e);r(33),r(79),r(20);var n={name:"Cover",props:["image","path"],data:function(){return{}},computed:{title:function(){var output="";this.path&&this.path.split("/").forEach((function(t){output+='<p class="text-lg my-2">'+t+"</p>"}));return output}}},o=r(7),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full h-full flex justify-center items-center absolute inset-0 p-4"},[t.image?r("img",{staticClass:"block rounded-md max-h-full",attrs:{src:t.image}}):r("div",{staticClass:"bg-gray-200 dark:bg-gray-800 w-full h-full p-4 relative rounded flex justify-center items-center text-center"},[r("svg",{staticClass:"absolute fill-current text-gray-300 dark:text-gray-860 inset-2 transform top-1/2 rotate-180 opacity-60 -translate-y-1/2",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"299.2254999999999 397.8038000000001 401.5409999999997 315.357"}},[r("path",{attrs:{d:"M681.4395 530.5928c-7.576-21.18-23.963-33.328-44.96-33.328h-18.151v112.545h18.151c21.275 0 37.716-11.724 45.097-32.154 2.644-7.197 4.042-15.312 4.042-23.47 0-7.84-1.446-16-4.179-23.593m-75.959 135.162c-7.915 8.056-19.048 12.674-30.542 12.674h-149.887c-11.521 0-22.373-4.506-30.57-12.702-8.054-7.915-12.673-19.05-12.673-30.544v-10.081h-20.884v6.767c0 16.855 4.4 31.759 12.705 43.07 8.861 12.406 22.551 20.08 39.548 22.186 3.465.494 7.073.744 10.721.744h152.193c3.651 0 7.258-.25 10.676-.739 17.198-2.114 30.564-9.575 39.732-22.182 8.075-11.192 12.386-25.775 12.538-42.2v-7.646h-20.709v10.081c0 11.407-4.672 22.539-12.848 30.572m-2.589-105.796h-34.725c-3.014 0-5.535-1.517-6.994-4.303l-13.465-22.148-22.213 54.207c-.713 2.139-2.207 3.759-4.265 4.582-.946.405-1.942.61-2.963.61-3.04 0-5.763-1.822-6.945-4.661l-22.973-53.708-24.537 72.2c-.056.167-.113.305-.168.443-.089.222-.177.444-.268.713-.149.449-.573.983-.948 1.456-1.04 1.171-2.14 1.955-3.269 2.33-.882.293-1.788.444-2.695.444-1.081 0-2.116-.217-2.937-.599-.734-.368-1.369-.685-1.814-1.128l-.107-.108-.121-.092c-.841-.657-1.648-1.84-2.224-3.214l-16.72-47.024h-35.441v75.224c0 7.33 2.992 14.526 8.21 19.743 5.219 5.219 12.415 8.21 19.742 8.21h149.887c7.437 0 14.448-2.915 19.744-8.21 5.217-5.217 8.209-12.413 8.209-19.743zm0-74.664c0-7.436-2.915-14.447-8.209-19.74-5.293-5.296-12.305-8.211-19.744-8.211h-39.921c-1.392 0-2.963-.491-4.376-1.388l-66.669-37.071v30.812c0 4.217-3.43 7.647-7.646 7.647h-31.275c-7.33 0-14.527 2.994-19.742 8.211-5.294 5.293-8.21 12.304-8.21 19.74v59.371h40.923c3.481 0 6.413 2.226 7.358 5.735l11.015 30.656 23.847-70.429c1.131-3.13 4.093-5.234 7.373-5.234.81 0 1.618.129 2.349.365 2.055.721 3.794 2.395 4.758 4.561l23.484 55.12 20.858-51.268c.56-1.679 1.688-3.065 3.272-4.014 1.217-.739 2.606-1.128 4.014-1.128 2.677 0 5.094 1.352 6.473 3.628l19.595 32.008h30.473zm-221.083 11.97h-18.153c-20.777 0-37.639 12.459-45.103 33.323-2.639 7.333-4.034 15.493-4.034 23.598 0 8.537 1.31 16.435 3.892 23.457 7.386 20.443 23.878 32.167 45.245 32.167h18.153zm314.203 85.493c-7.253 20.099-21.476 34.198-40.049 39.706l-1.604.476v8.929c0 20.138-5.369 38.127-15.537 52.044-11.508 15.991-28.816 25.811-50.081 28.404-4.197.561-8.452.844-12.649.844h-152.193c-4.196 0-8.45-.283-12.673-.846-21.387-2.624-38.231-12.184-50.065-28.417-10.158-13.902-15.527-31.891-15.527-52.029v-8.973l-1.465-.432c-18.724-5.515-32.942-19.61-40.054-39.735-3.244-8.649-4.889-18.252-4.889-28.543 0-9.727 1.696-19.662 4.9-28.717 9.951-27.644 31.649-43.496 59.53-43.496h18.15l.271-2.135c1.207-9.522 5.612-18.43 12.419-25.099 8.183-8.181 19.035-12.687 30.556-12.687h23.774l-.006-36.062c-.112-1.572.223-3.077.965-4.35 1.413-2.402 3.883-3.836 6.609-3.836 1.354 0 2.688.375 3.876 1.095l76.816 43.153h37.853c11.494 0 22.627 4.618 30.575 12.706 6.79 6.65 11.196 15.558 12.401 25.08l.27 2.135h18.295c27.789 0 49.435 15.852 59.382 43.484 3.209 9.065 4.905 18.999 4.905 28.765.138 9.627-1.508 19.496-4.755 28.536"}})]),t._v(" "),r("div",{staticClass:"relative z-10",domProps:{innerHTML:t._s(t.title)}})])])}),[],!1,null,null,null);e.default=component.exports},180:function(t,e,r){var content=r(248);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(53).default)("d48b1a92",content,!0,{sourceMap:!1})},181:function(t,e,r){var content=r(251);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(53).default)("51cd7b17",content,!0,{sourceMap:!1})},184:function(t,e,r){var content=r(254);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(53).default)("52269f99",content,!0,{sourceMap:!1})},199:function(t,e,r){"use strict";var n=r(0),o=(r(24),{name:"Layout",data:function(){return{foldername:""}},components:{},watch:{loginStatus:function(t,e){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("login status updated"),t===e){n.next=7;break}if(!1===t){n.next=7;break}return r.$route.query.collection>0?r.$store.commit("app/currentCollection",r.$route.query.collection):r.$store.commit("app/currentCollection",0),n.next=6,r.$store.dispatch("app/fetchFolder",r.currentFolder);case 6:r.$store.dispatch("app/getGroupDetails");case 7:case"end":return n.stop()}}),n)})))()},darkMode:{handler:function(t,e){t!==e&&(this.$colorMode.preference=t?"dark":"light",this.$colorMode.value=t?"dark":"light")},immediate:!0},$route:{handler:function(t,e){t!==e&&this.$store.commit("app/menu",!1)},immediate:!0}},mounted:function(){},computed:{currentFolder:function(){return this.$route.query.folder||""},loginStatus:function(){return this.$store.state.app.loginStatus},server:function(){return this.$store.state.app.server},folder:function(){return this.$store.state.app.folder},rightbar:function(){return this.$store.state.app.rightbar},player:function(){return this.$store.state.app.player},darkMode:function(){return this.$store.state.app.groupDetails.darkMode}}}),c=r(7),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"relative flex items-top min-h-screen bg-gray-200 dark:bg-gray-800 w-full overflow-hidden",class:{dark:t.darkMode}},[r("div",{staticClass:"flex flex-col items-top h-screen w-full"},[r("Header"),t._v(" "),r("div",{staticClass:"flex w-full relative h-screen border-t border-gray-100 dark:border-gray-750 lg:border-t-0"},[r("Nav"),t._v(" "),r("Nuxt")],1),t._v(" "),r("LoginStatus")],1),t._v(" "),r("div",{staticClass:"transform transition-all border-l h-screen border-gray-300 dark:border-gray-900 w-full max-w-sm z-20 items-top absolute lg:relative inset-0 flex bg-gray-100 dark:bg-gray-840 flex-col",class:{"-mr-96":!1===t.rightbar,"translate-x-full":!1===t.rightbar}},[null!==t.folder&&t.folder.files&&0===t.folder.files.length?r("folder-details",{attrs:{server:t.server,details:t.folder,name:t.foldername}}):t._e(),t._v(" "),null!==t.folder&&t.folder.files&&t.folder.files.length>0?r("book-details",{attrs:{server:t.server,details:t.folder,name:t.foldername}}):t._e()],1),t._v(" "),r("div",{staticClass:"transition-all transform absolute right-0 border-l h-screen border-gray-300 dark:border-gray-900 w-full max-w-sm items-top z-30 flex flex-col",class:{"translate-y-full":!1===t.player}},[null!==t.folder&&!1!==t.player?r("player",{attrs:{server:t.server,details:t.folder}}):t._e()],1)])}),[],!1,null,null,null);e.a=component.exports;installComponents(component,{Header:r(303).default,Nav:r(304).default,LoginStatus:r(305).default,FolderDetails:r(306).default,BookDetails:r(307).default,Player:r(308).default})},200:function(t,e,r){"use strict";var n=r(7),component=Object(n.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v("\n  I AM HERE\n  "),r("Nuxt")],1)}),[],!1,null,null,null);e.a=component.exports},203:function(t,e,r){"use strict";r.r(e);r(33),r(79),r(134),r(42);var n={name:"BreadCrumbs",computed:{breadcrumbs:function(){var t=[{name:"Home",link:"/",active:!1}];if(this.$route.query.folder&&"/"!==this.$route.query.folder)for(var e=this.$route.query.folder.split("/"),i=0;i<e.length;i++)t.push({name:e[i],link:e.slice(0,i+1).join("/"),active:i===e.length-1});return t}}},o=r(7),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.breadcrumbs.length>1?r("div",{staticClass:"breadcrumbs flex flex-wrap"},t._l(t.breadcrumbs,(function(e,n){return r("span",{key:n,staticClass:"my-1",class:{active:e.active},on:{click:function(r){return t.$store.dispatch("app/selectFolder",{path:e.link})}}},[t._v("\n    "+t._s(e.name)+"\n  ")])})),0):t._e()}),[],!1,null,null,null);e.default=component.exports},204:function(t,e,r){r(205),t.exports=r(206)},245:function(t,e,r){var content=r(246);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(53).default)("581dbee3",content,!0,{sourceMap:!1})},246:function(t,e,r){var n=r(52)((function(i){return i[1]}));n.push([t.i,'::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{--tw-bg-opacity:1;background-color:rgba(209, 213, 219, var(--tw-bg-opacity))}.dark ::-webkit-scrollbar-track{background-color:#00000022}::-webkit-scrollbar-thumb{--tw-bg-opacity:1;background-color:rgba(156, 163, 175, var(--tw-bg-opacity));--tw-bg-opacity:0.6}.dark ::-webkit-scrollbar-thumb{background-color:#00000033}::-webkit-scrollbar-thumb:hover{--tw-bg-opacity:1;background-color:rgba(156, 163, 175, var(--tw-bg-opacity));--tw-bg-opacity:1}.dark ::-webkit-scrollbar-thumb:hover{background-color:#00000044}*,body{font-family:"Roboto",sans-serif;font-weight:400}body{--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.dark body{--tw-text-opacity:1;color:rgba(156, 163, 175, var(--tw-text-opacity))}.content-area{height:calc(100vh - 6rem)}.mobilesearch{position:absolute;top:0;left:0;right:0;bottom:0;padding:15px}.mobilesearch input{padding:.75rem 1.25rem}.label-floating label{color:#9ca3af;font-weight:300}.label-floating input:not(:-moz-placeholder-shown),.label-floating select:not(:-moz-placeholder-shown){padding-top:1.6rem;padding-bottom:.25rem}.label-floating input:not(:-ms-input-placeholder),.label-floating select:not(:-ms-input-placeholder){padding-top:1.6rem;padding-bottom:.25rem}.label-floating input:not(:-moz-placeholder-shown), .label-floating select:not(:-moz-placeholder-shown){padding-top:1.6rem;padding-bottom:.25rem}.label-floating input:not(:-ms-input-placeholder), .label-floating select:not(:-ms-input-placeholder){padding-top:1.6rem;padding-bottom:.25rem}.label-floating input:not(:placeholder-shown),.label-floating select:not(:placeholder-shown){padding-top:1.6rem;padding-bottom:.25rem}.label-floating input:not(:-moz-placeholder-shown)~label, .label-floating select:not(:-moz-placeholder-shown)~label{padding-top:0.5rem;padding-bottom:0.5rem;font-weight:600;--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.label-floating input:not(:-moz-placeholder-shown)~label,.label-floating select:not(:-moz-placeholder-shown)~label{font-size:.8rem;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.label-floating input:not(:-ms-input-placeholder)~label, .label-floating select:not(:-ms-input-placeholder)~label{padding-top:0.5rem;padding-bottom:0.5rem;font-weight:600;--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.label-floating input:not(:-ms-input-placeholder)~label,.label-floating select:not(:-ms-input-placeholder)~label{font-size:.8rem;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.label-floating input:not(:-moz-placeholder-shown)~label, .label-floating select:not(:-moz-placeholder-shown)~label{padding-top:0.5rem;padding-bottom:0.5rem;font-weight:600;--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.label-floating input:not(:-ms-input-placeholder)~label, .label-floating select:not(:-ms-input-placeholder)~label{padding-top:0.5rem;padding-bottom:0.5rem;font-weight:600;--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.label-floating input:not(:placeholder-shown)~label, .label-floating select:not(:placeholder-shown)~label{padding-top:0.5rem;padding-bottom:0.5rem;font-weight:600;--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.label-floating input:not(:-moz-placeholder-shown)~label, .label-floating select:not(:-moz-placeholder-shown)~label{font-size:.8rem;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.label-floating input:not(:-ms-input-placeholder)~label, .label-floating select:not(:-ms-input-placeholder)~label{font-size:.8rem;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.label-floating input:not(:placeholder-shown)~label,.label-floating select:not(:placeholder-shown)~label{font-size:.8rem;transition:all .2s ease-in-out}.cover-container:before{content:"";display:block;padding-top:100%}.breadcrumbs{margin-bottom:1.5rem;margin-top:0.5rem}.breadcrumbs span{position:relative;cursor:pointer;border-right-width:1px;--tw-border-opacity:1;border-color:rgba(229, 231, 235, var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(243, 244, 246, var(--tw-bg-opacity));padding:0.25rem;padding-left:0.75rem;padding-right:0.75rem;font-size:0.875rem;line-height:1.25rem;font-weight:400}.breadcrumbs span:hover{--tw-bg-opacity:1;background-color:rgba(249, 250, 251, var(--tw-bg-opacity))}.dark .breadcrumbs span{--tw-border-opacity:1;border-color:rgba(31, 41, 55, var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(26, 35, 49, var(--tw-bg-opacity))}.dark .breadcrumbs span:hover{--tw-bg-opacity:1;background-color:rgba(26, 35, 49, var(--tw-bg-opacity));--tw-bg-opacity:0.6}.breadcrumbs span.active{font-weight:400;font-weight:500;--tw-text-opacity:1;color:rgba(209, 213, 219, var(--tw-text-opacity));--tw-text-opacity:1;color:rgba(219, 39, 119, var(--tw-text-opacity));text-decoration:none}.leftbar{position:relative}.leftbar:after{position:absolute;top:0px;bottom:0px;--tw-border-opacity:1;border-color:rgba(243, 244, 246, var(--tw-border-opacity))}.dark .leftbar:after{--tw-border-opacity:1;border-color:rgba(44, 51, 64, var(--tw-border-opacity))}@media (min-width: 1024px){.leftbar:after{border-right-width:1px}}.leftbar:after{content:"";right:-2px}.sidebar{background-color:#f9f9f9}.nav{border-width:1px;border-color:transparent;transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.nav:hover{--tw-bg-opacity:1;background-color:rgba(249, 250, 251, var(--tw-bg-opacity));--tw-drop-shadow:drop-shadow(0 1px 1px rgba(0,0,0,0.05));filter:var(--tw-filter);filter:var(--tw-filter)}.dark .nav:hover{--tw-bg-opacity:1;background-color:rgba(26, 35, 49, var(--tw-bg-opacity));--tw-bg-opacity:0.4}.nav.active{position:relative;--tw-bg-opacity:1;background-color:rgba(249, 250, 251, var(--tw-bg-opacity));--tw-drop-shadow:drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1)) drop-shadow(0 1px 1px rgba(0, 0, 0, 0.06));filter:var(--tw-filter);filter:var(--tw-filter)}.dark .nav.active{border-width:1px;--tw-border-opacity:1;border-color:rgba(22, 31, 44, var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgba(26, 35, 49, var(--tw-bg-opacity));--tw-drop-shadow:drop-shadow(0 0 #0000);filter:var(--tw-filter)}.nav.active:after{position:absolute;left:0px;top:0px;bottom:0px;border-top-left-radius:0.5rem;border-bottom-left-radius:0.5rem;--tw-border-opacity:1;border-color:rgba(219, 39, 119, var(--tw-border-opacity));border-left-width:6px;content:""}.page-leave-active{transition-property:all;transition-timing-function:ease-in-out;transition-duration:50ms}.page-leave-to{opacity:1}.page-enter-active{transition-property:all;transition-timing-function:ease-in-out;transition-duration:.2s}.page-enter{transform:translateX(100%);opacity:.7}.prose{--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.dark .prose{--tw-text-opacity:1;color:rgba(156, 163, 175, var(--tw-text-opacity))}.prose h1{font-size:1.5rem;line-height:2rem;--tw-text-opacity:1;color:rgba(75, 85, 99, var(--tw-text-opacity))}.dark .prose h1{--tw-text-opacity:1;color:rgba(156, 163, 175, var(--tw-text-opacity))}.collection-container{border-bottom:1px solid #d1d5db}.logout:before{border-top-width:1px;--tw-border-opacity:1;border-color:rgba(243, 244, 246, var(--tw-border-opacity))}.dark .logout:before{--tw-border-opacity:1;border-color:rgba(44, 51, 64, var(--tw-border-opacity))}.logout:before{content:"";position:absolute;top:0;left:0;right:0}',""]),n.locals={},t.exports=n},247:function(t,e,r){"use strict";r(180)},248:function(t,e,r){var n=r(52)((function(i){return i[1]}));n.push([t.i,".description-text p{margin:15px 0}",""]),n.locals={},t.exports=n},250:function(t,e,r){"use strict";r(181)},251:function(t,e,r){var n=r(52)((function(i){return i[1]}));n.push([t.i,".description-text p{margin:15px 0}.readmore{height:95px;overflow:hidden}.readmore.active{height:auto;overflow:visible}",""]),n.locals={},t.exports=n},253:function(t,e,r){"use strict";r(184)},254:function(t,e,r){var n=r(52)((function(i){return i[1]}));n.push([t.i,".playback-slider{z-index:10;height:0.75rem;background-color:transparent;-webkit-appearance:none;width:100%;outline:none;transition:opacity .2s}.playback-slider::-webkit-slider-thumb{height:0.75rem;width:0.75rem;--tw-bg-opacity:1;background-color:rgba(219, 39, 119, var(--tw-bg-opacity));-webkit-appearance:none;appearance:none;border-radius:50%;cursor:pointer}.playback-slider::-moz-range-thumb{height:0.75rem;width:0.75rem;--tw-bg-opacity:1;background-color:rgba(219, 39, 119, var(--tw-bg-opacity));width:10px;height:10px;border-radius:50%;cursor:pointer}",""]),n.locals={},t.exports=n},255:function(t,e,r){"use strict";r.r(e);r(32),r(18),r(31),r(43),r(20),r(44);var n=r(16),o=r(80),c=r(136),l=r(137),f=r(138);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}e.default={namespaced:!0,state:function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},o.default)},getters:c,mutations:l,actions:f}},256:function(t,e,r){"use strict";r.r(e);var n=r(139),o=r(140),c=r(141),l=r(142);e.default={namespaced:!0,state:n.default,getters:o,mutations:c,actions:l}},303:function(t,e,r){"use strict";r.r(e);r(33),r(99);var n={name:"Header",props:[],components:{},data:function(){return{}},computed:{group:function(){return this.$store.state.app.group},search:{get:function(){return this.$store.state.app.search},set:function(t){this.$store.commit("app/search",t)}},menu:{get:function(){return this.$store.state.app.menu},set:function(t){this.$store.commit("app/menu",t)}},searchterm:{get:function(){return this.$store.state.app.searchterm},set:function(t){this.$store.commit("app/searchterm",t)}}}},o=r(7),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sticky top-0 flex flex-col items-top lg:h-screen w-full"},[r("div",{staticClass:"flex items-center w-full h-20 lg:h-24 border-b border-gray-300 dark:border-gray-900 lg:border-b-0 relative"},[r("div",{staticClass:"lg:w-80 flex-shrink-0 flex-grow-0 lg:border-r lg:border-b border-gray-300 dark:border-gray-900 p-3 px-6 lg:px-8 h-20 lg:h-24 flex items-center"},[r("NuxtLink",{staticClass:"flex items-center",attrs:{to:"/"}},[r("svg",{staticClass:"w-16 lg:w-18 mr-4 transform rotate-180",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"299.2254999999999 397.8038000000001 401.5409999999997 315.357"}},[r("path",{attrs:{d:"M681.4395 530.5928c-7.576-21.18-23.963-33.328-44.96-33.328h-18.151v112.545h18.151c21.275 0 37.716-11.724 45.097-32.154 2.644-7.197 4.042-15.312 4.042-23.47 0-7.84-1.446-16-4.179-23.593m-75.959 135.162c-7.915 8.056-19.048 12.674-30.542 12.674h-149.887c-11.521 0-22.373-4.506-30.57-12.702-8.054-7.915-12.673-19.05-12.673-30.544v-10.081h-20.884v6.767c0 16.855 4.4 31.759 12.705 43.07 8.861 12.406 22.551 20.08 39.548 22.186 3.465.494 7.073.744 10.721.744h152.193c3.651 0 7.258-.25 10.676-.739 17.198-2.114 30.564-9.575 39.732-22.182 8.075-11.192 12.386-25.775 12.538-42.2v-7.646h-20.709v10.081c0 11.407-4.672 22.539-12.848 30.572m-2.589-105.796h-34.725c-3.014 0-5.535-1.517-6.994-4.303l-13.465-22.148-22.213 54.207c-.713 2.139-2.207 3.759-4.265 4.582-.946.405-1.942.61-2.963.61-3.04 0-5.763-1.822-6.945-4.661l-22.973-53.708-24.537 72.2c-.056.167-.113.305-.168.443-.089.222-.177.444-.268.713-.149.449-.573.983-.948 1.456-1.04 1.171-2.14 1.955-3.269 2.33-.882.293-1.788.444-2.695.444-1.081 0-2.116-.217-2.937-.599-.734-.368-1.369-.685-1.814-1.128l-.107-.108-.121-.092c-.841-.657-1.648-1.84-2.224-3.214l-16.72-47.024h-35.441v75.224c0 7.33 2.992 14.526 8.21 19.743 5.219 5.219 12.415 8.21 19.742 8.21h149.887c7.437 0 14.448-2.915 19.744-8.21 5.217-5.217 8.209-12.413 8.209-19.743zm0-74.664c0-7.436-2.915-14.447-8.209-19.74-5.293-5.296-12.305-8.211-19.744-8.211h-39.921c-1.392 0-2.963-.491-4.376-1.388l-66.669-37.071v30.812c0 4.217-3.43 7.647-7.646 7.647h-31.275c-7.33 0-14.527 2.994-19.742 8.211-5.294 5.293-8.21 12.304-8.21 19.74v59.371h40.923c3.481 0 6.413 2.226 7.358 5.735l11.015 30.656 23.847-70.429c1.131-3.13 4.093-5.234 7.373-5.234.81 0 1.618.129 2.349.365 2.055.721 3.794 2.395 4.758 4.561l23.484 55.12 20.858-51.268c.56-1.679 1.688-3.065 3.272-4.014 1.217-.739 2.606-1.128 4.014-1.128 2.677 0 5.094 1.352 6.473 3.628l19.595 32.008h30.473zm-221.083 11.97h-18.153c-20.777 0-37.639 12.459-45.103 33.323-2.639 7.333-4.034 15.493-4.034 23.598 0 8.537 1.31 16.435 3.892 23.457 7.386 20.443 23.878 32.167 45.245 32.167h18.153zm314.203 85.493c-7.253 20.099-21.476 34.198-40.049 39.706l-1.604.476v8.929c0 20.138-5.369 38.127-15.537 52.044-11.508 15.991-28.816 25.811-50.081 28.404-4.197.561-8.452.844-12.649.844h-152.193c-4.196 0-8.45-.283-12.673-.846-21.387-2.624-38.231-12.184-50.065-28.417-10.158-13.902-15.527-31.891-15.527-52.029v-8.973l-1.465-.432c-18.724-5.515-32.942-19.61-40.054-39.735-3.244-8.649-4.889-18.252-4.889-28.543 0-9.727 1.696-19.662 4.9-28.717 9.951-27.644 31.649-43.496 59.53-43.496h18.15l.271-2.135c1.207-9.522 5.612-18.43 12.419-25.099 8.183-8.181 19.035-12.687 30.556-12.687h23.774l-.006-36.062c-.112-1.572.223-3.077.965-4.35 1.413-2.402 3.883-3.836 6.609-3.836 1.354 0 2.688.375 3.876 1.095l76.816 43.153h37.853c11.494 0 22.627 4.618 30.575 12.706 6.79 6.65 11.196 15.558 12.401 25.08l.27 2.135h18.295c27.789 0 49.435 15.852 59.382 43.484 3.209 9.065 4.905 18.999 4.905 28.765.138 9.627-1.508 19.496-4.755 28.536",fill:"#db2777"}})]),t._v(" "),r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"font-semibold text-lg uppercase text-pink-600 leading-none"},[t._v("\n            Audio"),r("span",{staticClass:"font-bold text-gray-600 dark:text-gray-400"},[t._v("Serve")])]),t._v(" "),r("div",{staticClass:"leading-none text-xs font-normal text-gray-500"},[t._v("\n            "+t._s(t.group)+"\n          ")])])])],1),t._v(" "),r("div",{staticClass:"px-0 lg:px-12 w-full items-center flex items-center lg:border-l border-gray-100 dark:border-gray-750 h-20 lg:h-24",class:{mobilesearch:t.search,flex:t.search}},[r("floating-label-input",{class:{block:t.search,hidden:!t.search},attrs:{title:"Search..."},model:{value:t.searchterm,callback:function(e){t.searchterm=e},expression:"searchterm"}}),t._v(" "),r("div",{staticClass:"ml-3"},[r("div",{staticClass:"rounded-full bg-gray-300 w-8 h-8 justify-center items-center",class:{flex:t.search,hidden:!t.search},on:{click:function(e){t.search=!1}}},[r("i",{staticClass:"fa-thin fa-times fa-fw"})])]),t._v(" "),r("div",{staticClass:"flex lg:hidden justify-end text-lg mr-1",class:{hidden:t.search}},[r("div",{staticClass:"bg-gray-200 dark:bg-gray-800 rounded w-10 h-10 flex justify-center items-center mx-1",on:{click:function(e){t.search=!0}}},[r("i",{staticClass:"fa-light fa-magnifying-glass"})]),t._v(" "),r("div",{staticClass:"bg-gray-200 dark:bg-gray-800 rounded w-10 h-10 flex justify-center items-center mx-1",on:{click:function(e){t.menu=!t.menu}}},[r("i",{staticClass:"fa-light fa-bars"})])])],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FloatingLabelInput:r(104).default})},304:function(t,e,r){"use strict";r.r(e);var n={name:"Nav",props:[],computed:{group:function(){return this.$store.state.app.group},collections:function(){return this.$store.state.app.collections},menu:{get:function(){return this.$store.state.app.menu},set:function(t){this.$store.commit("app/menu",t)}},activepage:function(){return this.$store.state.app.activepage},currentCollection:function(){return this.$store.state.app.currentCollection}},methods:{logout:function(){this.$store.commit("app/loginStatus",!1)},changeCollection:function(t){this.$store.commit("app/currentCollection",t.target.value)}}},o=r(7),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"transition-all z-40 bg-gray-200 dark:bg-gray-800 flex-shrink-0 flex-grow-0 w-screen transform lg:block lg:w-80 h-(screen-80) lg:h-(screen-96) border-r border-gray-300 dark:border-gray-900 absolute inset-0 lg:relative leftbar",class:{hidden:!t.menu,block:t.menu}},[t.collections.length>1?r("div",{staticClass:"relative border-t border-gray-100 dark:border-gray-750 appearance-none flex-grow collection-container"},[r("select",{staticClass:"w-full py-1 px-6 bg-gray-200 dark:bg-gray-800 text-sm leading-normal w-full",domProps:{value:t.currentCollection},on:{change:t.changeCollection}},t._l(t.collections,(function(option,e){return r("option",{key:e,domProps:{value:e}},[t._v("\n        "+t._s(option)+"\n      ")])})),0)]):t._e(),t._v(" "),r("div",{staticClass:"lg:border-t border-gray-100 dark:border-gray-750 p-8 px-6"},[r("NuxtLink",{staticClass:"flex items-center my-2 p-3 px-5 rounded-lg nav",class:{active:"library"===t.activepage},attrs:{to:"/"}},[r("i",{staticClass:"fa-light fa-fw fa-rectangle-vertical-history mr-2 fa-lg"}),t._v("\n      Library\n    ")]),t._v(" "),r("NuxtLink",{staticClass:"flex items-center my-2 p-3 px-5 rounded-lg nav",class:{active:"settings"===t.activepage},attrs:{to:"/settings"}},[r("i",{staticClass:"fa-light fa-fw fa-gear mr-2 fa-lg"}),t._v("\n      Settings\n    ")]),t._v(" "),r("NuxtLink",{staticClass:"flex items-center my-2 p-3 px-5 rounded-lg nav",class:{active:"cached"===t.activepage},attrs:{to:"/cached"}},[r("i",{staticClass:"fa-light fa-fw fa-box-archive mr-2 fa-lg"}),t._v("\n      Cached\n    ")]),t._v(" "),r("div",{staticClass:"flex cursor-pointer absolute bottom-0 left-0 border-t border-gray-300 dark:border-gray-900 w-full items-center p-5 px-10 logout",on:{click:t.logout}},[r("i",{staticClass:"fa-light fa-fw fa-right-from-bracket mr-2 fa-lg"}),t._v("\n      Logout\n    ")])],1)])}),[],!1,null,null,null);e.default=component.exports},305:function(t,e,r){"use strict";r.r(e);var n={name:"Login",props:[],components:{FloatingLabelInput:r(104).default},data:function(){return{}},computed:{loginStatus:function(){return this.$store.state.app.loginStatus},server:{get:function(){return this.$store.state.app.server},set:function(t){this.$store.commit("app/server",t)}},group:{get:function(){return this.$store.state.app.group},set:function(t){this.$store.commit("app/group",t)}},secret:{get:function(){return this.$store.state.app.secret},set:function(t){this.$store.commit("app/secret",t)}}},methods:{login:function(){this.$store.dispatch("app/login",{server:this.server,group:this.group,secret:this.secret})}}},o=r(7),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return!1===t.loginStatus?r("div",{staticClass:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex justify-center items-center"},[r("div",{staticClass:"rounded-lg flex bg-gray-100 dark:bg-gray-600 flex-col p-8 w-full max-w-md m-4"},[r("div",{staticClass:"flex justify-center mb-5"},[r("NuxtLink",{staticClass:"flex items-center",attrs:{to:"/"}},[r("svg",{staticClass:"w-20 mr-3 transform rotate-180",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"299.2254999999999 397.8038000000001 401.5409999999997 315.357"}},[r("path",{attrs:{d:"M681.4395 530.5928c-7.576-21.18-23.963-33.328-44.96-33.328h-18.151v112.545h18.151c21.275 0 37.716-11.724 45.097-32.154 2.644-7.197 4.042-15.312 4.042-23.47 0-7.84-1.446-16-4.179-23.593m-75.959 135.162c-7.915 8.056-19.048 12.674-30.542 12.674h-149.887c-11.521 0-22.373-4.506-30.57-12.702-8.054-7.915-12.673-19.05-12.673-30.544v-10.081h-20.884v6.767c0 16.855 4.4 31.759 12.705 43.07 8.861 12.406 22.551 20.08 39.548 22.186 3.465.494 7.073.744 10.721.744h152.193c3.651 0 7.258-.25 10.676-.739 17.198-2.114 30.564-9.575 39.732-22.182 8.075-11.192 12.386-25.775 12.538-42.2v-7.646h-20.709v10.081c0 11.407-4.672 22.539-12.848 30.572m-2.589-105.796h-34.725c-3.014 0-5.535-1.517-6.994-4.303l-13.465-22.148-22.213 54.207c-.713 2.139-2.207 3.759-4.265 4.582-.946.405-1.942.61-2.963.61-3.04 0-5.763-1.822-6.945-4.661l-22.973-53.708-24.537 72.2c-.056.167-.113.305-.168.443-.089.222-.177.444-.268.713-.149.449-.573.983-.948 1.456-1.04 1.171-2.14 1.955-3.269 2.33-.882.293-1.788.444-2.695.444-1.081 0-2.116-.217-2.937-.599-.734-.368-1.369-.685-1.814-1.128l-.107-.108-.121-.092c-.841-.657-1.648-1.84-2.224-3.214l-16.72-47.024h-35.441v75.224c0 7.33 2.992 14.526 8.21 19.743 5.219 5.219 12.415 8.21 19.742 8.21h149.887c7.437 0 14.448-2.915 19.744-8.21 5.217-5.217 8.209-12.413 8.209-19.743zm0-74.664c0-7.436-2.915-14.447-8.209-19.74-5.293-5.296-12.305-8.211-19.744-8.211h-39.921c-1.392 0-2.963-.491-4.376-1.388l-66.669-37.071v30.812c0 4.217-3.43 7.647-7.646 7.647h-31.275c-7.33 0-14.527 2.994-19.742 8.211-5.294 5.293-8.21 12.304-8.21 19.74v59.371h40.923c3.481 0 6.413 2.226 7.358 5.735l11.015 30.656 23.847-70.429c1.131-3.13 4.093-5.234 7.373-5.234.81 0 1.618.129 2.349.365 2.055.721 3.794 2.395 4.758 4.561l23.484 55.12 20.858-51.268c.56-1.679 1.688-3.065 3.272-4.014 1.217-.739 2.606-1.128 4.014-1.128 2.677 0 5.094 1.352 6.473 3.628l19.595 32.008h30.473zm-221.083 11.97h-18.153c-20.777 0-37.639 12.459-45.103 33.323-2.639 7.333-4.034 15.493-4.034 23.598 0 8.537 1.31 16.435 3.892 23.457 7.386 20.443 23.878 32.167 45.245 32.167h18.153zm314.203 85.493c-7.253 20.099-21.476 34.198-40.049 39.706l-1.604.476v8.929c0 20.138-5.369 38.127-15.537 52.044-11.508 15.991-28.816 25.811-50.081 28.404-4.197.561-8.452.844-12.649.844h-152.193c-4.196 0-8.45-.283-12.673-.846-21.387-2.624-38.231-12.184-50.065-28.417-10.158-13.902-15.527-31.891-15.527-52.029v-8.973l-1.465-.432c-18.724-5.515-32.942-19.61-40.054-39.735-3.244-8.649-4.889-18.252-4.889-28.543 0-9.727 1.696-19.662 4.9-28.717 9.951-27.644 31.649-43.496 59.53-43.496h18.15l.271-2.135c1.207-9.522 5.612-18.43 12.419-25.099 8.183-8.181 19.035-12.687 30.556-12.687h23.774l-.006-36.062c-.112-1.572.223-3.077.965-4.35 1.413-2.402 3.883-3.836 6.609-3.836 1.354 0 2.688.375 3.876 1.095l76.816 43.153h37.853c11.494 0 22.627 4.618 30.575 12.706 6.79 6.65 11.196 15.558 12.401 25.08l.27 2.135h18.295c27.789 0 49.435 15.852 59.382 43.484 3.209 9.065 4.905 18.999 4.905 28.765.138 9.627-1.508 19.496-4.755 28.536",fill:"#db2777"}})]),t._v(" "),r("div",{staticClass:"flex flex-col"},[r("div",{staticClass:"font-semibold uppercase text-pink-600 text-2xl leading-none"},[t._v("\n            Audio"),r("span",{staticClass:"font-bold text-gray-600 dark:text-gray-400"},[t._v("Serve")])])])])],1),t._v(" "),r("floating-label-input",{staticClass:"my-2",attrs:{title:"Server"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}}),t._v(" "),r("floating-label-input",{staticClass:"my-2",attrs:{title:"Shared Secret"},model:{value:t.secret,callback:function(e){t.secret=e},expression:"secret"}}),t._v(" "),r("floating-label-input",{staticClass:"my-2",attrs:{title:"User/Group"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}}),t._v(" "),r("button",{staticClass:"bg-pink-600 text-white w-full mt-3 p-3 rounded-xl text-lg",on:{click:t.login}},[t._v("\n      Login\n    ")])],1)]):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FloatingLabelInput:r(104).default})},306:function(t,e,r){"use strict";r.r(e);var n=r(0),o=(r(24),r(18),r(37),r(15),r(23),r(28),r(101),r(41)),c=r.n(o),l={name:"FolderDetails",props:["details","name","server"],data:function(){return{image:null}},computed:{description:function(){return this.$store.state.app.folderDescription}},watch:{details:function(t,e){t!==e&&t.description&&(console.log("update description"),this.$store.dispatch("app/getFolderDescription",this.details.description.path)),t.image||t.description?this.$store.commit("app/rightbar",!0):this.$store.commit("app/rightbar",!1),this.image=null,this.getImage()}},mounted:function(){this.image||this.description?(this.$store.commit("app/rightbar",!0),this.getImage()):this.$store.commit("app/rightbar",!1)},methods:{getImage:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.details||!t.details.cover){e.next=10;break}return r=t.$store.getters["app/getServerUrl"]+"cover/"+t.details.cover.path,e.next=4,fetch(r,{headers:{Authorization:"Bearer "+c.a.get("audioserve_token")}});case 4:return n=e.sent,e.next=7,n.blob();case 7:o=e.sent,l=URL.createObjectURL(o),t.image=l;case 10:case"end":return e.stop()}}),e)})))()}}},f=(r(247),r(7)),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col overflow-auto"},[r("div",{staticClass:"text p-8 pb-5 flex flex-col justify-center"},[r("img",{staticClass:"block shadow rounded-md",attrs:{src:t.image}})]),t._v(" "),r("div",{staticClass:"text-xl flex justify-center px-8 font-bold"},[t._v(t._s(t.name))]),t._v(" "),r("div",{staticClass:"text px-8 description-text text-sm prose",domProps:{innerHTML:t._s(t.description)}})])}),[],!1,null,null,null);e.default=component.exports},307:function(t,e,r){"use strict";r.r(e);var n=r(0),o=(r(24),r(18),r(37),r(20),r(109),r(15),r(23),r(28),r(101),r(60),r(41)),c=r.n(o),l={name:"BookDetails",props:["details","name","server"],data:function(){return{readmore:!1,cached:!1,downloading:!1,image:null}},computed:{moretext:function(){return this.readmore?"Less..":"More.."},description:function(){return this.$store.state.app.book.description},transcode:function(){return this.$store.state.app.transcode},seek:function(){return this.$store.state.app.book.seek},hash:function(){return this.$store.getters["app/hash"](this.$route.fullPath)},totalTime:function(){var t=0;return this.details.files.forEach((function(e){t+=e.meta.duration})),t},remaining:function(){var t=this.totalTime-this.seek;return this.$formatToTime(t,2,!1)+" remaining"},percent:function(){var t=(this.totalTime-this.seek)/this.totalTime*100;return 100-t.toFixed(0)},player:function(){return this.$store.state.player.player},current:function(){return this.$store.state.player.current},playing:function(){return this.$store.state.player.playing},cacheavailable:function(){return"caches"in window}},mounted:function(){this.getImage()},methods:{listen:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.playing){e.next=4;break}t.$store.commit("app/player",!0),e.next=12;break;case 4:return e.next=6,t.$store.dispatch("player/load");case 6:return t.$store.commit("app/player",!0),e.next=9,t.$store.dispatch("app/autoRewind");case 9:r=e.sent,t.player.currentTime=t.current-r,t.player.play();case 12:case"end":return e.stop()}}),e)})))()},getImage:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.details||!t.details.cover){e.next=10;break}return r=t.$store.getters["app/getServerUrl"]+"cover/"+t.details.cover.path,e.next=4,fetch(r,{headers:{Authorization:"Bearer "+c.a.get("audioserve_token")}});case 4:return n=e.sent,e.next=7,n.blob();case 7:o=e.sent,l=URL.createObjectURL(o),t.image=l;case 10:case"end":return e.stop()}}),e)})))()},download:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("download"),t.downloading=!0,e.next=4,navigator.storage.persist();case 4:return r=e.sent,console.log("Persisted storage granted: ".concat(r)),n=t.$store.state.app.cacheKey+t.hash,e.next=9,caches.delete(n);case 9:return e.next=11,caches.open(n);case 11:return o=e.sent,e.next=14,Promise.all(t.details.files.map((function(e){return o.add(t.$store.getters["app/getFileUrl"](e.path))})));case 14:t.downloading=!1,t.cached=!0,console.log("files cached "+n);case 17:case"end":return e.stop()}}),e)})))()}}},f=(r(250),r(7)),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col overflow-auto pb-8"},[r("div",{staticClass:"text pt-3 lg:pt-8 p-8 pb-5 flex flex-col justify-center"},[r("div",{staticClass:"lg:hidden"},[r("BreadCrumbs")],1),t._v(" "),r("div",{staticClass:"w-full relative cover-container bg-gray-300 dark:bg-gray-800 justify-center flex items-center rounded-md shadow-inner"},[r("Cover",{attrs:{image:t.image,path:t.$route.query.folder}})],1)]),t._v(" "),r("div",{staticClass:"text-xl flex justify-center px-8 font-bold"},[t._v(t._s(t.name))]),t._v(" "),r("button",{staticClass:"text-white bg-pink-600 font-normal rounded-lg mx-8 my-4 p-3",on:{click:t.listen}},[r("i",{staticClass:"fa-light fa-circle-play"}),t._v(" Listen")]),t._v(" "),t.description?[r("div",{staticClass:"text px-8 description-text text-sm readmore",class:{active:t.readmore},domProps:{innerHTML:t._s(t.description)}}),t._v(" "),r("div",{staticClass:"px-8 text-pink-600 font-normal text-sm cursor-pointer",on:{click:function(e){t.readmore=!t.readmore}}},[t._v(t._s(t.moretext))])]:t._e(),t._v(" "),r("div",{staticClass:"px-8 mt-3 font-normal text-sm"},[t._v("Progress")]),t._v(" "),r("div",{staticClass:"flex px-8 pt-1 items-center"},[r("div",{staticClass:"relative flex-grow mr-2"},[r("div",{staticClass:"overflow-hidden h-1 text-xs flex rounded bg-gray-300"},[r("div",{staticClass:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-pink-600",style:{width:t.percent+"%"}})])]),t._v(" "),r("div",{staticClass:"text-sm"},[t._v(t._s(t.percent)+"%")])]),t._v(" "),r("div",{staticClass:"px-8 text-xs"},[t._v(t._s(t.remaining))]),t._v(" "),r("div",{staticClass:"px-8 pt-8"},[t.cacheavailable?r("div",{staticClass:"cursor-pointer relative"},[r("span",{directives:[{name:"show",rawName:"v-show",value:!t.cached&&!t.downloading,expression:"!cached && !downloading"}],staticClass:"fa-layers fa-fw fa-2x",on:{click:t.download}},[r("i",{staticClass:"fa-solid fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-light fa-arrow-down-to-line",attrs:{"data-fa-transform":"shrink-8"}})]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.downloading,expression:"downloading"}],staticClass:"fa-layers fa-fw fa-2x"},[r("i",{staticClass:"fa-solid fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-thin fa-down-to-line fa-beat",attrs:{"data-fa-transform":"shrink-8"}})]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.cached,expression:"cached"}],staticClass:"fa-layers fa-fw fa-2x"},[r("i",{staticClass:"fa-solid fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-thin fa-trash-can",attrs:{"data-fa-transform":"shrink-8"}})]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.downloading,expression:"downloading"}],staticClass:"fa-layers fa-fw fa-2x absolute inset-0 opacity-70"},[r("i",{staticClass:"fa-solid fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-light fa-spinner-third fa-spin",attrs:{"data-fa-transform":"shrink-2"}})])]):t._e()])],2)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BreadCrumbs:r(203).default,Cover:r(149).default})},308:function(t,e,r){"use strict";r.r(e);var n=r(0),o=(r(24),r(109),r(201),r(202),r(39),{name:"Player",props:["details","server"],data:function(){return{editPlaybackSpeed:!1,playerdetails:!1,bookmarkstab:!0,historytab:!1}},computed:{image:function(){return this.$store.state.app.book.cover},groupDetails:function(){return this.$store.state.app.groupDetails},playbackSpeed:function(){return Number.parseFloat(this.groupDetails.playback_speed).toFixed(2)},transcode:function(){return this.$store.state.app.transcode},seek:function(){return this.$store.state.app.book.seek},hash:function(){return this.$store.getters["app/hash"](this.$route.fullPath)},totalTime:function(){return 0},remaining:function(){return this.currentFile.duration-this.current},totalremaining:function(){var t=this.$store.getters["player/totalTime"]-this.currentFile.start-this.current;return this.$formatToTime(t,2,!1)+" remaining"},percent:function(){return 0},localpercent:function(){return this.player?100-(Math.ceil(this.remaining)/this.currentFile.duration*100).toFixed(2):0},currentFile:function(){return this.$store.state.player.currentFile},playing:function(){return this.$store.state.player.playing},current:function(){return this.$store.state.player.current},player:function(){return this.$store.state.player.player},loading:function(){return this.$store.state.player.loading},history:function(){return this.$store.state.app.book.history},chaptername:function(){return this.details.files&&this.currentFile?this.details.files[this.currentFile.index].name:"Chapter 1"}},mounted:function(){var t=this,e=this;this.player.onload=function(t){e.$store.commit("player/loading",!1)},this.player.onplay=function(t){e.$store.commit("player/playing",!0),e.updatePlayerDetails(),e.$store.dispatch("app/savePlayEvent",e.currentFile.start+e.current)},this.player.onpause=function(r){t.$store.commit("player/playing",!1),e.$store.dispatch("app/savePauseEvent",e.currentFile.start+e.current)},this.player.onended=function(t){console.log("track ended"),e.nextTrack()}},beforeDestroy:function(){console.log("clean up"),caches.delete(this.$store.state.app.cacheKey+"temp-"+this.hash)},methods:{prevFile:function(){return{index:this.currentFile.index-1,start:this.currentFile.start-this.currentFile.duration,duration:this.details.files[this.currentFile.index-1].meta.duration,path:this.details.files[this.currentFile.index-1].path}},nextFile:function(){return{index:this.currentFile.index+1,start:this.currentFile.start+this.currentFile.duration,duration:this.details.files[this.currentFile.index+1].meta.duration,path:this.details.files[this.currentFile.index+1].path}},nextTrack:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.currentFile.index+1>=t.details.files.length)){e.next=4;break}return e.next=3,t.$store.dispatch("app/resetBook");case 3:return e.abrupt("return",null);case 4:return e.next=6,t.$store.dispatch("app/updateBookDetails",{seek:t.currentFile.start+t.currentFile.duration});case 6:return e.next=8,t.$store.dispatch("player/load");case 8:return e.next=10,t.player.play();case 10:case"end":return e.stop()}}),e)})))()},updateSeek:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.playing){r.next=9;break}return r.next=3,e.player.pause();case 3:return e.player.currentTime=t.target.value,e.$store.commit("player/current",t.target.value),r.next=7,e.player.play();case 7:r.next=11;break;case 9:e.player.currentTime=t.target.value,e.$store.commit("player/current",t.target.value);case 11:case"end":return r.stop()}}),r)})))()},loadFile:function(t){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},updatePlayerDetails:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this,n=Date.now();n>e+1e3&&(e=n,r.$store.commit("player/current",t||r.player.currentTime)),!0===this.playing&&window.requestAnimationFrame((function(){r.updatePlayerDetails(t,e)}))},closePlayer:function(){this.$store.commit("app/player",!1)},togglePlay:function(){this.playing?this.pause():this.play()},play:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("app/autoRewind");case 2:r=e.sent,t.player.currentTime=t.current-r,t.player.play();case 5:case"end":return e.stop()}}),e)})))()},pause:function(){console.log("pause pressed"),this.player.pause()},updatePlaybackSpeed:function(t){this.$store.commit("app/playbackSpeed",t.target.value),this.player.playbackRate=t.target.value.toFixed(2)},increasePlaybackSpeed:function(){var t=parseFloat(this.playbackSpeed)+parseFloat("0.05");this.$store.commit("app/playbackSpeed",t.toFixed(2)),this.player.playbackRate=t.toFixed(2)},decreasePlaybackSpeed:function(){var t=parseFloat(this.playbackSpeed)-parseFloat("0.05");this.$store.commit("app/playbackSpeed",t.toFixed(2)),this.player.playbackRate=t.toFixed(2)},seekForwards:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.player.pause(),r=t.player.currentTime+parseInt(t.groupDetails.seekForwards),n=t.currentFile.duration,!(r>=n)){e.next=11;break}if(!(t.currentFile.index<t.details.files.length)){e.next=11;break}return r-=t.currentFile.duration,t.$store.commit("player/currentFile",t.nextFile()),e.next=9,t.$store.dispatch("player/load",{file:t.currentFile.path,seek:0});case 9:e.next=11;break;case 11:console.log("> skipping to "+r+" from "+t.player.currentTime),t.player.currentTime=r,t.player.play();case 14:case"end":return e.stop()}}),e)})))()},seekBackwards:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.player.pause(),r=t.player.currentTime,!((n=r-parseInt(t.groupDetails.seekBackwards))<=0)){e.next=12;break}if(!(t.currentFile.index>0)){e.next=11;break}return t.$store.commit("player/currentFile",t.prevFile()),n=t.currentFile.duration+n,e.next=9,t.$store.dispatch("player/load",{file:t.currentFile.path,seek:t.currentFile.duration});case 9:e.next=12;break;case 11:n=0;case 12:console.log("< skipping to "+n+" from "+r),t.player.currentTime=n,t.player.play();case 15:case"end":return e.stop()}}),e)})))()},swapTab:function(t){this.bookmarkstab="bookmarks"===t,this.historytab="history"===t},formatDate:function(time){var data=new Intl.DateTimeFormat("default",{month:"long",day:"numeric",year:"numeric"}).formatToParts(time);return data[1].value+" "+data[0].value+", "+data[2].value},formatTime:function(time){return new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric",second:"numeric"}).format(time)}}}),c=(r(253),r(7)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col justify-between relative bg-gray-100 dark:bg-gray-840 h-screen overflow-auto"},[r("div",{staticClass:"absolute top-0 right-0 w-8 h-8 rounded-bl flex cursor-pointer justify-center items-center",on:{click:t.closePlayer}},[r("i",{staticClass:"fa-thin fa-chevron-down"})]),t._v(" "),r("div",[r("div",{staticClass:"text p-8 pb-5 pt-12 flex justify-center flex-shrink"},[r("div",{staticClass:"w-full relative cover-container bg-gray-300 dark:bg-gray-800 justify-center flex items-center rounded-md shadow-inner"},[r("Cover",{attrs:{image:t.image,path:t.$route.query.folder}})],1)]),t._v(" "),r("div",{staticClass:"w-full px-8 flex flex-col text-center items-center"},[r("div",{staticClass:" font-semibold flex mb-2"},[t._v(t._s(t.chaptername))]),t._v(" "),r("div",{staticClass:"flex py-1 items-center w-full relative mb-1"},[r("div",{staticClass:"relative flex-grow mr-2"},[r("div",{staticClass:"overflow-hidden h-1 text-xs flex rounded bg-gray-300"},[r("div",{staticClass:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-pink-600",style:{width:t.localpercent+"%"}})])]),t._v(" "),r("input",{staticClass:"absolute playback-slider",attrs:{type:"range",min:"0",max:t.currentFile.duration},domProps:{value:t.current},on:{input:t.updateSeek}})]),t._v(" "),r("div",{staticClass:"flex w-full justify-between pointer-events-none"},[r("div",{staticClass:"text-xs"},[t._v(t._s(t.$formatToPlayback(t.current)))]),t._v(" "),r("div",{staticClass:"px-8 text-xs"},[t._v(t._s(t.totalremaining))]),t._v(" "),r("div",{staticClass:"text-xs"},[t._v("-"+t._s(t.$formatToPlayback(t.remaining)))])])])]),t._v(" "),r("div",{staticClass:"flex items-center w-full justify-evenly my-2"},[r("div",{},[r("span",{staticClass:"fa-layers fa-fw fa-3x relative",on:{click:t.seekBackwards}},[r("i",{staticClass:"fa-thin fa-circle-notch fa-rotate-by",staticStyle:{"--fa-rotate-angle":"-23deg"}}),t._v(" "),r("i",{staticClass:"fa-solid fa-chevron-left",staticStyle:{"font-size":"12px"},attrs:{"data-fa-transform":"up-30"}}),t._v(" "),r("span",{staticClass:"text-sm absolute inset-0 flex justify-center items-center"},[t._v(t._s(t.groupDetails.seekBackwards))])])]),t._v(" "),r("div",{staticClass:"cursor-pointer relative"},[r("span",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"fa-layers fa-fw fa-6x",on:{click:t.togglePlay}},[r("i",{staticClass:"fa-solid text-pink-600 fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-solid fa-play",attrs:{"data-fa-transform":"shrink-10"}})]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],staticClass:"fa-layers fa-fw fa-6x",on:{click:t.togglePlay}},[r("i",{staticClass:"fa-solid text-pink-600 fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-solid fa-pause",attrs:{"data-fa-transform":"shrink-10"}})]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fa-layers fa-fw fa-6x absolute inset-0 opacity-70"},[r("i",{staticClass:"fa-solid fa-circle"}),t._v(" "),r("i",{staticClass:"fa-inverse fa-light fa-spinner-third fa-spin",attrs:{"data-fa-transform":"shrink-2"}})])]),t._v(" "),r("div",{},[r("span",{staticClass:"fa-layers fa-fw fa-3x relative",on:{click:t.seekForwards}},[r("i",{staticClass:"fa-thin fa-circle-notch fa-rotate-by",staticStyle:{"--fa-rotate-angle":"23deg"}}),t._v(" "),r("i",{staticClass:"fa-solid fa-chevron-right",staticStyle:{"font-size":"12px"},attrs:{"data-fa-transform":"up-30"}}),t._v(" "),r("span",{staticClass:"text-sm absolute inset-0 flex justify-center items-center"},[t._v(t._s(t.groupDetails.seekForwards))])])])]),t._v(" "),r("div",{staticClass:"p-2 w-full"},[r("div",{staticClass:"bg-gray-200 dark:bg-gray-800 rounded p-3 px-6 w-full relative flex justify-between"},[r("button",{staticClass:"cursor-pointer",on:{click:function(e){t.editPlaybackSpeed=!0}}},[t._v(t._s(t.playbackSpeed)+"x")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),r("button",{staticClass:"cursor-pointer",on:{click:function(e){t.playerdetails=!0}}},[r("i",{staticClass:"fa-thin fa-sliders-up"})]),t._v(" "),t.editPlaybackSpeed?r("div",{staticClass:"absolute inset-0 flex bg-gray-200 dark:bg-gray-800 rounded justify-between p-3 px-6"},[r("span",[t._v(t._s(t.playbackSpeed)+"x")]),t._v(" "),r("div",{staticClass:"flex items-center"},[r("div",{staticClass:"mx-3 cursor-pointer",on:{click:t.decreasePlaybackSpeed}},[r("i",{staticClass:"fa-solid fa-circle-minus fa-lg"})]),t._v(" "),r("div",[r("input",{staticClass:"w-12 p-2 text-center",domProps:{value:t.playbackSpeed},on:{input:t.updatePlaybackSpeed}})]),t._v(" "),r("div",{staticClass:"mx-3 cursor-pointer",on:{click:t.increasePlaybackSpeed}},[r("i",{staticClass:"fa-solid fa-circle-plus fa-lg"})])]),t._v(" "),r("div",{staticClass:"cursor-pointer",on:{click:function(e){t.editPlaybackSpeed=!1}}},[t._v("Close")])]):t._e()])]),t._v(" "),t.playerdetails?r("div",{staticClass:"absolute inset-0 bg-gray-860 z-20"},[r("div",{on:{click:function(e){t.playerdetails=!1}}},[t._v("Close")]),t._v(" "),r("div",{on:{click:function(e){return t.swapTab("bookmarks")}}},[t._v("Bookmarks")]),r("div",{on:{click:function(e){return t.swapTab("history")}}},[t._v("History")]),t._v(" "),t.bookmarkstab?r("div",[t._v("Bookmarks")]):t._e(),t._v(" "),t.historytab?r("div",t._l(t.history,(function(e,n){return r("div",{key:n},[t._v(t._s(t.formatDate(e.start))+" - "+t._s(t.formatTime(e.start)))])})),0):t._e()]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"cursor-pointer"},[e("i",{staticClass:"fa-thin fa-alarm-snooze"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"cursor-pointer"},[e("i",{staticClass:"fa-thin fa-airplay"})])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Cover:r(149).default})},80:function(t,e,r){"use strict";r.r(e),e.default={player:new Audio,playing:!1,loading:!1,current:0,files:[],currentFile:{index:0,start:0,duration:0,path:""}}}},[[204,6,1,7]]]);